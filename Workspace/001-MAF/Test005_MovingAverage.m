%
pkg load control;
pkg load signal;
clear all;
clc
close all;
% Sine wave
fs = 500; %500Hz sampling frequency
f = 50;
t = (0:49)/fs;
x = sin(2*pi*f*t);
figure(1)
subplot(4,1,1)
plot(t,x)
#add white noise
L = 50;
mu = 1;
sigma = 0.5;
wn = sigma*randn(L,1)+mu;
wn = wn';
subplot(4,1,2)
plot(wn)
%
y = x+wn;
subplot(4,1,3)
plot(t,y)
% MAF
yf = zeros(50);
for i = 1:48
  yf(i) = (y(i)+y(i+1)+y(i+2))/3;
endfor
yf(49) = (y(48)+y(49)+y(50))/3;
yf(50) = y(50);
subplot(4,1,4);
plot(t,yf)
% Filtering using TM4C123 microcontroller and 3 samples
y_tiva3 = [1.42224503,	2.09434104, 2.08919072, 1.84687996, 1.18671227, 0.568644643, 0.179978326, 0.0640479997, 0.619240344, 0.871444702,	1.46500576, 1.62067401, 1.82846296, 1.37129593, 1.09652531, 0.653777659, 0.355994314, 0.261148006,	0.36656633,	1.06425297, 1.76537430, 2.18479657,	1.99124515,	1.29690135, 0.644769371,	0.426067978, 0.163857326, 0.349801302, 0.779829323, 1.13354897, 1.7352705, 1.51478434, 2.00206256,	1.68198574,	1.71399498, 0.825169623, 0.0322033577, -0.163033307, 0.43092832, 1.49281442, 1.94557297,	2.22383237,	2.11267972, 1.62488699,	0.835426629, 0.0998156667, -0.434166044,	-0.531983674,	-0.531983674, -0.0754519999];
figure(2)
subplot(3,1,1)
plot(t,y)
subplot(3,1,2)
plot(t,yf)
subplot(3,1,3)
plot(t,y_tiva3)
% Filtering using TM4C123 microcontroller and 3 samples
y_tiva5 = [0.516103029, 1.72542405, 2.025208, 2.53239107, 1.70997298, 1.29827595,	0.551887989, -0.144229993, 0.132276997,	0.204097003, 1.52134705, 0.888890028,	1.98477995, 1.98835194,	1.51225698,	0.613278985, 1.16403997, 0.184014007,	-0.28007099, 0.879500985,	0.500268996, 1.812989, 2.9828651,	1.75853598,	1.23233402,	0.899833977, -0.197860003, 0.57622999, 0.113201998,	0.359972,	1.86631405,	1.17436099,	2.1651361, 1.20485604, 2.63619494,	1.20490599,	1.30088401,	-0.0302809998,	-1.17399299,	0.715174019,	1.75160396,	2.01166511,	2.07345009,	2.58638191,	1.67820704,	0.610072017,	0.218000993,	-0.528626025,	-0.991873026,	-0.0754519999,];
figure(3)
subplot(3,1,1)
plot(t,y)
subplot(3,1,2)
plot(t,yf)
subplot(3,1,3)
plot(t,y_tiva5)